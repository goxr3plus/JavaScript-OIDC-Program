                        <!DOCTYPE html>
                        <html>
                        <head>
                            <title>JS Application</title>
                            <meta charset="utf-8" />
                            <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css" />
                            <style>
                                .main-container {
                                    padding-top: 70px;
                                }

                                pre:empty {
                                    display: none;
                                }
                            </style>
                        </head>
                        <body style="background-color:#303030; width:100%; height:100%;">
                            <nav class="navbar navbar-inverse navbar-fixed-top">
                                <div class="container">
                                    <div class="navbar-header">
                                        <a class="navbar-brand" href="#">JS Application</a>
                                    </div>
                                </div>
                            </nav>

                            <div class="container main-container" style="width:100%; height:100%;">

                               <!-- Buttons -->
                               <div class="row"  style="width:500px; margin: 0 auto;">
                                <div class="col-xs-12">
                                    <ul class="list-inline list-unstyled requests">
                                        <li><a href="index.html" class="btn btn-primary">Home</a></li>
                                        <li><button type="button" class="btn btn-success js-login">Login</button></li>
                                        <li><button type="button" class="btn btn-warning js-call-api">Call API</button></li>
                                        <li><button type="button" class="btn btn-danger js-logout">Logout</button></li>            
                                    </ul>
                                </div>
                            </div>     

                            <!-- TESTING CODE -->
                            


                            <!-- EXTRA URLS  -->         
                            <div class="row">
                              <div class="container" style="padding-bottom: 3px">
                                <div class="input-group">
                                    <span class="input-group-addon" style="color:black; font-weight:bold" >Authority</span>
                                    <input id="authority" type="text" value="http://localhost:8080/openid-connect-server-webapp" class="form-control">
                                </div>
                            </div>

                            <div class="row">
                               <div class="container" style="padding-bottom: 3px">
                                <div class="input-group">
                                    <span class="input-group-addon" style="color:black; font-weight:bold" >Client ID</span>
                                    <input id="client_id" type="text" value="client3" class="form-control">
                                     <span class="input-group-addon" style="color:black; font-weight:bold" >Client Secret</span>
                                    <input id="client_secret" type="text" value="secret3" class="form-control">
                                </div>
                            </div>

                            <div class="row">
                               <div class="container" style="padding-bottom: 3px">
                                <div class="input-group">
                                   
                            <!-- <p style="margin:20px; padding-top:15px; color:white">
                            default access token timeout = 3600 <br>
                            max accesss token timeout =  12 months <br>
                            default refresh token timeout = 12 months <br>
                            max refresh token timeout = 12 months <br>
                            </p> -->
                            
                                </div>
                            </div>
                            

                            <div class="row">
                              <div class="container" style="padding-bottom: 3px">
                                <div class="input-group">
                                    <span class="input-group-addon" style="color:black; font-weight:bold" >API Call URL</span>
                                    <input id="api-call-text-field" type="text" value="http://localhost:8080/openid-connect-server-webapp/api/clients" class="form-control">
                                </div>
                            </div>

                            <!-- END OF EXTRA URLS  -->

                            <div class="container" style="width:94%; height:100%; padding-top: 15px">
                              <div class="row">
                                <div class="col-xs-5">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">User data</div>
                                        <div class="panel-body">
                                            <pre class="js-user"></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-5">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">API call result</div>
                                        <div class="panel-body">
                                            <pre class="js-api-result"></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-2">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Console data</div>
                                        <div id="extraDiv" style="font-weight:bold" class="panel-body">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <script src="node_modules/jquery/dist/jquery.js"></script>
                        <script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
                        <script src="node_modules/oidc-client/dist/oidc-client.js"></script>

                        <script>
                                var settings;
                                var manager;
                                var user;
                              

                               //---------------Refresh the Manager every time below text fields text is changing---------------------------

                                $("#api-call-text-field").on('keyup', function (e) {
                                   if (e.keyCode == 13) {
                                      callApi();
                                    }
                                 });

                                $('#authority').on('input', function() {  
                                  updateManager();
                                });
                                
                                $('#client_secret').on('input', function() {  
                                 updateManager();
                                });

                                $('#client_id').on('input', function() { 
                                  updateManager();
                                });


                               //------------------------------------

                               $('.js-login').on('click', function () {
                                console.log("Loggin Button pressed");
                                manager.signinPopup().catch(function (error) {
                                    console.error('error while logging in through the popup', error);
                                });
                               });


                               $('.js-call-api').on('click', function(){
                                   callApi();
                               });


                               $('.js-logout').on('click', function () {
                                    manager.signoutRedirect().catch(function (error) {
                                    console.error('error while signing out user', error);
                                 });
                               });




                             //================== METHODS==================================

                                function callApi() {

                                    //Some extra fancy code here
                                    var currentdate = new Date(); 
                                    var datetime = "js-call-api button cliked at: " + currentdate.getDate() + "/"
                                    + (currentdate.getMonth()+1)  + "/" 
                                    + currentdate.getFullYear() + " @ "  
                                    + currentdate.getHours() + ":"  
                                    + currentdate.getMinutes() + ":" 
                                    + currentdate.getSeconds();

                                    document.getElementById("extraDiv").innerHTML = document.getElementById("extraDiv").innerHTML + "</br>"+datetime;

                                     //end of extra fancy code

                                     var headers = {};
                                     if (user && user.access_token) {
                                        headers['Authorization'] = 'Bearer ' + user.access_token;
                                    }

                                    $.ajax({
                                       url: $("#api-call-text-field").val(),
                                       // url: 'http://localhost:8080/openid-connect-server-webapp/api/tokens/access',  
                                       method: 'GET',
                                       dataType: 'json',
                                       crossDomain: true,
                                       headers: headers
                                   }).then(function (data) {
                                    display('.js-api-result', data);
                                }).catch(function (error) {
                                    display('.js-api-result', {
                                        status: error.status,
                                        statusText: error.statusText,
                                        response: error.responseJSON
                                    });
                                });
                               }

                                

                                function updateManager(){

                                  settings = {
                                     // authority: 'http://snf-761523.vm.okeanos.grnet.gr:8080/openid-connect-server-webapp', 
                                     authority: $("#authority").val(), 
                                     client_id: $("#client_id").val(),
                                     client_secret: $("#client_secret").val(),
                                     user_id: "user",
                                     popup_redirect_uri: 'http://localhost/jsApp/popup.html',
                                     silent_redirect_uri: 'http://localhost/jsApp/silent-renew.html',
                                     post_logout_redirect_uri: 'http://localhost/jsApp/index.html',

                                     response_type: 'code id_token token',
                                     scope: 'openid profile email address offline_access',

                                     filterProtocolClaims: false
                                 };

                                 manager = new Oidc.UserManager(settings);

                                 Oidc.Log.logger = console;

                                 manager.events.addUserLoaded(function (loadedUser) {
                                   user = loadedUser;
                                   display('.js-user', user);
                                 });

                                 manager.events.addSilentRenewError(function (error) {
                                  console.error('error while renewing the access token', error);
                                 });
  
                                 manager.events.addUserSignedOut(function () {
                                  alert('The user has signed out');
                                 });

                               }

                                 // helper function to show data to the user
                                function display(selector, data) {
                                    if (data && typeof data === 'string') {
                                        data = JSON.parse(data);
                                    }
                                    if (data) {
                                        data = JSON.stringify(data, null, 2);
                                    }

                                    $(selector).text(data);
                                }

                                 updateManager();

                        </script>
                    </body>
                    </html>